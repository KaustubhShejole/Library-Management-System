<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Departmental Library Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

  <div class="businessup-nav-widget-area">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-4 text-center-xs">
                <div class="navbar-header">
                    <!-- Logo -->
                    <a href="https://vnit.ac.in/cse/" class="navbar-brand" rel="home" aria-current="page">
                        <img src="cse_vnit_pic.jpg" />
                        <!-- <img width="600" height="105" src="https://vnit.ac.in/cse/wp-content/uploads/2018/10/vnitnew-logo-sample-img.jpg" class="custom-logo" alt="Department of Computer Science &amp; Engineering" decoding="async" srcset="https://vnit.ac.in/cse/wp-content/uploads/2018/10/vnitnew-logo-sample-img.jpg 600w, https://vnit.ac.in/cse/wp-content/uploads/2018/10/vnitnew-logo-sample-img-300x53.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"> -->
                    </a>
                    <!-- Logo -->
                </div>
            </div>
            <div class="col-md-9 col-sm-8">
                <div class="header-widget" style="padding-left: 50px;padding-top:10px;">
                  <form action="/" method="post" class="action-form">
                      <button style = "float:right" type="submit" class="btn btn-primary">DLMS</button>
                  </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- <form action="/" method="post" class="action-form">
    <button type="submit" class="btn btn-primary">Home</button>
</form> -->

<script>
    function showItemDetails(element, item) {
        var fruitname = item.fruitname;
        var price = item.price;
        var comment = item.comment;
        var id = item._id;
        // document.getElementById("selected_item").innerHTML = fruitname + price + comment;
        // Construct the HTML content with item details
        // var parsedItem = JSON.parse(item);

     var htmlContent = '<h3>Book Name: ' + fruitname + '</h3>'+
            '<p>Price: '+ price + '</p>' + '<p>Comment: '+ comment + '</p>' +
            '<p>Id: '+ id + '</p>';
            var updateButtonHtml = '<form action="/update" method="post" class="action-form">' +
              '<input type="hidden" name="itemId" value="' + id + '">' +
              '<button type="submit" class="btn btn-secondary">Update</button>' +
            '</form>';
            var deleteButtonHtml = '<form action="/delete" method="post" class="action-form" onsubmit="return confirm(\'Are you sure you want to delete this item?\');">' +
              '<input type="hidden" name="itemId" value="' + id + '">' +
              '<button type="submit" class="btn btn-danger">Delete</button>' +
            '</form>';
            var viewButtonHtml = '<form action="/viewdetails" method="post" class="action-form">' +
                       '<input type="hidden" name="itemId" value="' + id + '">' +
                       '<button type="submit" class="btn btn-primary">Details</button>' +
                     '</form>';



   // Set the innerHTML of the selected item div
   document.getElementById('selected_item_information').innerHTML = htmlContent;
    document.getElementById('update_button1').innerHTML = updateButtonHtml;
    document.getElementById('delete_button1').innerHTML =deleteButtonHtml;
    document.getElementById('view_button1').innerHTML = viewButtonHtml;

    }
</script>

<p id="demo"></p>
<div class="container2">
<div id="items-grid">
    <% newListItems.forEach(function(item) { %>
    <div class="item" onclick="showItemDetails(this, <%= JSON.stringify(item) %>)">
        <h3>Book Name: <%= item.fruitname %></h3>
        <p>Price: <%= item.price %></p>
        <p>Comment: <%= item.comment %></p>
        <div class="actions" style="display:none">
            <form action="/update" method="post" class="action-form">
                <input type="hidden" name="itemId" value="<%= item._id %>">
                <% parent_href = '/search_author'; %>
                <input type="hidden" name="itemId" value="<%= item._id %>">

                <button type="submit" class="btn btn-secondary">Update</button>
            </form>
            <form action="/delete?parent_href='/search_author'" method="post" class="action-form" onsubmit="return confirm('Are you sure you want to delete this item?');">
    <input type="hidden" name="itemId" value="<%= item._id %>">
    <button type="submit" class="btn btn-danger">Delete</button>
</form>
            <form action="/viewdetails" method="post" class="action-form">
                <input type="hidden" name="itemId" value="<%= item._id %>">
                <button type="submit" class="btn btn-primary">View Details</button>
            </form>
        </div>
    </div>
    <% }) %>
</div>
<div id="selected_item">
  <div id="selected_item_information">

  </div>
  <div id="button_container">
    <div id="update_button1">

    </div>
    <div id="delete_button1" style="display:none;" >

    </div>
    <div id="view_button1">

    </div>
  </div>
        <!-- Content of the selected item -->
</div>
</div>

<!--
<table class="table table-bordered table-hover">
<thead>
<tr>
    <th scope="col">Serial Number</th>
    <th scope="col">Fruit Name</th>
    <th scope="col">Price</th>
    <th scope="col">Comment</th>
    <th scope="col">Actions</th>
</tr>
</thead>
<tbody>
<% var count = 1 %>
<% newListItems.forEach(function(item) { %>
<tr class="<%= count % 2 === 0 ? 'even' : 'odd' %>">
    <td><%= count++ %></td>
    <td><%= item.fruitname %></td>
    <td><%= item.price %></td>
    <td><%= item.comment %></td>
    <td>
        <form action="/delete" method="post" class="action-form" onsubmit="return confirm('Are you sure you want to delete this item?');">
            <input type="hidden" name="itemId" value="<%= item._id %>">
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
        <form action="/viewdetails" method="post" class="action-form">
            <input type="hidden" name="itemId" value="<%= item._id %>">
            <button type="submit" class="btn btn-primary">View Details</button>
        </form>
        <form action="/update" method="post" class="action-form">
            <input type="hidden" name="itemId" value="<%= item._id %>">
            <button type="submit" class="btn btn-secondary">Update</button>
        </form>
    </td>
</tr>
<% }) %>
</tbody>
</table>
 -->

<script>
    const items = document.querySelectorAll('.item');
    const detailsTable = document.getElementById('details-table');

    items.forEach(item => {
        item.addEventListener('click', () => {
            // Hide all detail tables
            document.querySelectorAll('.item-details').forEach(detail => {
                detail.style.display = 'none';
            });

            // Show details table for the clicked item
            const itemId = item.getAttribute('data-item-id');
            const details = document.getElementById(`details-${itemId}`);
            details.style.display = 'table-row';
        });
    });
</script>






  </body>

</html>
